package cache

import (
	"encoding/base64"
	"fmt"
	"github.com/golang/protobuf/protoc-gen-go/descriptor"
	"github.com/jhump/protoreflect/desc"
	dynamicProto "github.com/jhump/protoreflect/dynamic"
	"time"
)

func Test() {
	str := "CvoMChhQcm94eVRlc3QvcHJveHltc2cucHJvdG8SI2NvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjIlIKAXgSDgoCdHMYASABKANSAnRzEj0KAnB2GAIgASgLMi0uY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuUHJveHlNc2dSAnB2IqcCCghQcm94eU1zZxIYCgdzdHJJdGVtGAEgASgJUgdzdHJJdGVtEhgKB2ludEl0ZW0YAiABKAVSB2ludEl0ZW0SQwoFY2hpbGQYAyABKAsyLS5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5DaGlsZE1zZ1IFY2hpbGQSTgoFaW1tYXAYBCADKAsyOC5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5Qcm94eU1zZy5JbW1hcEVudHJ5UgVpbW1hcBIYCgdpbWFycmF5GAUgAygJUgdpbWFycmF5GjgKCkltbWFwRW50cnkSEAoDa2V5GAEgASgJUgNrZXkSFAoFdmFsdWUYAiABKAVSBXZhbHVlOgI4ASI6CghDaGlsZE1zZxIWCgZjaGlsZDEYASABKAlSBmNoaWxkMRIWCgZjaGlsZDIYAiABKAVSBmNoaWxkMiKHCAoEdGVzdBIaCghzdHJ2YWx1ZRgBIAEoCVIIc3RydmFsdWUSHgoKaW50MzJ2YWx1ZRgCIAEoBVIKaW50MzJ2YWx1ZRIeCgppbnQ2NHZhbHVlGAMgASgDUgppbnQ2NHZhbHVlEkEKBnR2YWx1ZRgEIAEoCzIpLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3RSBnR2YWx1ZRJKCgVtYXBzdBgFIAMoCzI0LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3QuTWFwc3RFbnRyeVIFbWFwc3QSUAoHbWFwaTMydBgGIAMoCzI2LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3QuTWFwaTMydEVudHJ5UgdtYXBpMzJ0ElAKB21hcGk2NDUYByADKAsyNi5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy50ZXN0Lk1hcGk2NDVFbnRyeVIHbWFwaTY0NRJKCgVtYXBidBgIIAMoCzI0LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3QuTWFwYnRFbnRyeVIFbWFwYnQSUAoHbWFwc2kzMhgJIAMoCzI2LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3QuTWFwc2kzMkVudHJ5UgdtYXBzaTMyGmMKCk1hcHN0RW50cnkSEAoDa2V5GAEgASgJUgNrZXkSPwoFdmFsdWUYAiABKAsyKS5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy50ZXN0UgV2YWx1ZToCOAEaZQoMTWFwaTMydEVudHJ5EhAKA2tleRgBIAEoBVIDa2V5Ej8KBXZhbHVlGAIgASgLMikuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMudGVzdFIFdmFsdWU6AjgBGmUKDE1hcGk2NDVFbnRyeRIQCgNrZXkYASABKANSA2tleRI/CgV2YWx1ZRgCIAEoCzIpLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnRlc3RSBXZhbHVlOgI4ARpjCgpNYXBidEVudHJ5EhAKA2tleRgBIAEoCFIDa2V5Ej8KBXZhbHVlGAIgASgLMikuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMudGVzdFIFdmFsdWU6AjgBGjoKDE1hcHNpMzJFbnRyeRIQCgNrZXkYASABKAlSA2tleRIUCgV2YWx1ZRgCIAEoBVIFdmFsdWU6AjgBMm0KDFByb3h5U2VydmljZRJdCgRDYWxsEiYuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMueBotLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLlByb3h5TXNnYgZwcm90bzMKlQkKE2NvbW1vbi9jaGFuZ2UucHJvdG8SI2NvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjIuwHCgZjaGFuZ2USbgoRTWFwRmllbGRzX0ludGVnZXIYAiADKAsyQS5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5jaGFuZ2UuTWFwRmllbGRzSW50ZWdlckVudHJ5UhBNYXBGaWVsZHNJbnRlZ2VyEmsKEE1hcEZpZWxkc19TdHJpbmcYAyADKAsyQC5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5jaGFuZ2UuTWFwRmllbGRzU3RyaW5nRW50cnlSD01hcEZpZWxkc1N0cmluZxJlCg5NYXBGaWVsZHNfbG9uZxgEIAMoCzI+LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmNoYW5nZS5NYXBGaWVsZHNMb25nRW50cnlSDU1hcEZpZWxkc0xvbmcSUQoLRmllbGRDaGFuZ2UYASABKA4yLy5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5jaGFuZ2VUeXBlUgtGaWVsZENoYW5nZRJkCg1jaGFuZ2VkRmllbGRzGAUgAygLMj4uY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuY2hhbmdlLkNoYW5nZWRGaWVsZHNFbnRyeVINY2hhbmdlZEZpZWxkcxIYCgd2ZXJzaW9uGAYgASgDUgd2ZXJzaW9uGnQKFU1hcEZpZWxkc0ludGVnZXJFbnRyeRIQCgNrZXkYASABKAVSA2tleRJFCgV2YWx1ZRgCIAEoDjIvLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmNoYW5nZVR5cGVSBXZhbHVlOgI4ARpzChRNYXBGaWVsZHNTdHJpbmdFbnRyeRIQCgNrZXkYASABKAlSA2tleRJFCgV2YWx1ZRgCIAEoDjIvLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmNoYW5nZVR5cGVSBXZhbHVlOgI4ARpxChJNYXBGaWVsZHNMb25nRW50cnkSEAoDa2V5GAEgASgDUgNrZXkSRQoFdmFsdWUYAiABKA4yLy5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5jaGFuZ2VUeXBlUgV2YWx1ZToCOAEabQoSQ2hhbmdlZEZpZWxkc0VudHJ5EhAKA2tleRgBIAEoBVIDa2V5EkEKBXZhbHVlGAIgASgLMisuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuY2hhbmdlUgV2YWx1ZToCOAEqOgoKY2hhbmdlVHlwZRIJCgVhZGRlZBAAEgoKBnVwZGF0ZRABEgoKBmRlbGV0ZRACEgkKBWVtcHR5EANCJqoCI2NvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjYgZwcm90bzMK/QEKEmNvbW1vbi9lbXB0eS5wcm90bxIjY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMiDgoMZW1wdHlSZXF1ZXN0Ij0KE2VtcHR5VmVyc2lvblJlcXVlc3QSJgoOY3VycmVudFZlcnNpb24YASABKANSDmN1cnJlbnRWZXJzaW9uIkMKDWVtcHR5UmVzcG9uc2USGAoHc3VjY2VzcxgBIAEoCFIHc3VjY2VzcxIYCgdtZXNzYWdlGAIgASgJUgdtZXNzYWdlQiaqAiNjb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwY2IGcHJvdG8zCr0BChdjb21tb24vcmVxdWVzdEZpZC5wcm90bxIjY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMiTQoRUmVxdWVzdEZpZE1lc3NhZ2USJgoOY3VycmVudFZlcnNpb24YASABKANSDmN1cnJlbnRWZXJzaW9uEhAKA2ZpZBgCIAEoCVIDZmlkQiaqAiNjb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwY2IGcHJvdG8zCuwHChVjb21tb24vd3JhcHBlcnMucHJvdG8iIwoLRG91YmxlVmFsdWUSFAoFdmFsdWUYASABKAFSBXZhbHVlIiIKCkZsb2F0VmFsdWUSFAoFdmFsdWUYASABKAJSBXZhbHVlIiIKCkludDY0VmFsdWUSFAoFdmFsdWUYASABKANSBXZhbHVlIiMKC1VJbnQ2NFZhbHVlEhQKBXZhbHVlGAEgASgEUgV2YWx1ZSIiCgpJbnQzMlZhbHVlEhQKBXZhbHVlGAEgASgFUgV2YWx1ZSIjCgtVSW50MzJWYWx1ZRIUCgV2YWx1ZRgBIAEoDVIFdmFsdWUiIQoJQm9vbFZhbHVlEhQKBXZhbHVlGAEgASgIUgV2YWx1ZSIjCgtTdHJpbmdWYWx1ZRIUCgV2YWx1ZRgBIAEoCVIFdmFsdWUiIgoKQnl0ZXNWYWx1ZRIUCgV2YWx1ZRgBIAEoDFIFdmFsdWUiKAoQU3RyaW5nQXJyYXlWYWx1ZRIUCgV2YWx1ZRgBIAMoCVIFdmFsdWUiJwoPSW50MzJBcnJheVZhbHVlEhQKBXZhbHVlGAEgAygFUgV2YWx1ZSInCg9JbnQ2NEFycmF5VmFsdWUSFAoFdmFsdWUYASADKANSBXZhbHVlIogBChRTdHJpbmdTdHJpbmdNYXBWYWx1ZRI2CgV2YWx1ZRgBIAMoCzIgLlN0cmluZ1N0cmluZ01hcFZhbHVlLlZhbHVlRW50cnlSBXZhbHVlGjgKClZhbHVlRW50cnkSEAoDa2V5GAEgASgJUgNrZXkSFAoFdmFsdWUYAiABKAlSBXZhbHVlOgI4ASKGAQoTU3RyaW5nSW50MzJNYXBWYWx1ZRI1CgV2YWx1ZRgBIAMoCzIfLlN0cmluZ0ludDMyTWFwVmFsdWUuVmFsdWVFbnRyeVIFdmFsdWUaOAoKVmFsdWVFbnRyeRIQCgNrZXkYASABKAlSA2tleRIUCgV2YWx1ZRgCIAEoBVIFdmFsdWU6AjgBIoYBChNTdHJpbmdJbnQ2NE1hcFZhbHVlEjUKBXZhbHVlGAEgAygLMh8uU3RyaW5nSW50NjRNYXBWYWx1ZS5WYWx1ZUVudHJ5UgV2YWx1ZRo4CgpWYWx1ZUVudHJ5EhAKA2tleRgBIAEoCVIDa2V5EhQKBXZhbHVlGAIgASgDUgV2YWx1ZToCOAFCawoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWipnaXRodWIuY29tL2dvbGFuZy9wcm90b2J1Zi9wdHlwZXMvd3JhcHBlcnP4AQGiAgNHUEKqAg1XcmFwcGVyc1Byb3RvYgZwcm90bzMKnQsKGmRlY2xhcmF0aW9uL3Njb3JlQVBJLnByb3RvEiNjb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYxoSY29tbW9uL2VtcHR5LnByb3RvGhVjb21tb24vd3JhcHBlcnMucHJvdG8aE2NvbW1vbi9jaGFuZ2UucHJvdG8iOAoEdXNlchIOCgJpZBgBIAEoBVICaWQSIAoEbmFtZRgCIAEoCzIMLlN0cmluZ1ZhbHVlUgRuYW1lIjcKBWVycm9yEhQKBXRpdGxlGAEgASgJUgV0aXRsZRIYCgdjb250ZW50GAIgASgJUgdjb250ZW50IoUBCgVzY29yZRIaCghjYXRlZ29yeRgBIAEoCVIIY2F0ZWdvcnkSHgoKc2NvcmVWYWx1ZRgCIAEoBVIKc2NvcmVWYWx1ZRJACgVlcnJvchgDIAMoCzIqLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmVycm9yUgVlcnJvciLfAgoFZ3JhZGUSQwoGY2hhbmdlGAEgASgLMisuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuY2hhbmdlUgZjaGFuZ2USGwoCaWQYAiABKAsyCy5JbnQzMlZhbHVlUgJpZBI9CgR1c2VyGAMgASgLMikuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMudXNlclIEdXNlchJOCgZzY29yZXMYBCADKAsyNi5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5ncmFkZS5TY29yZXNFbnRyeVIGc2NvcmVzGmUKC1Njb3Jlc0VudHJ5EhAKA2tleRgBIAEoCVIDa2V5EkAKBXZhbHVlGAIgASgLMiouY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuc2NvcmVSBXZhbHVlOgI4ASKNAgoGZ3JhZGVzEkMKBmNoYW5nZRgBIAEoCzIrLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmNoYW5nZVIGY2hhbmdlElUKCGdyYWRlTWFwGAMgAygLMjkuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuZ3JhZGVzLkdyYWRlTWFwRW50cnlSCGdyYWRlTWFwGmcKDUdyYWRlTWFwRW50cnkSEAoDa2V5GAEgASgFUgNrZXkSQAoFdmFsdWUYAiABKAsyKi5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5ncmFkZVIFdmFsdWU6AjgBMvwCCghTY29yZUFQSRJyChBnZXRBbGxVc2VyU2NvcmVzEjEuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuZW1wdHlSZXF1ZXN0GisuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuZ3JhZGVzEoABChdnZXRWZXJzaW9uQWxsVXNlclNjb3JlcxI4LmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmVtcHR5VmVyc2lvblJlcXVlc3QaKy5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5ncmFkZXMSeQoWZ2V0QWxsVXNlclNjb3Jlc1N0cmVhbRIxLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmVtcHR5UmVxdWVzdBoqLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmdyYWRlMAFCJqoCI2NvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjYgZwcm90bzMK8QoKFmRlY2xhcmF0aW9uL3Rlc3QucHJvdG8SI2NvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjGhVjb21tb24vd3JhcHBlcnMucHJvdG8aE2NvbW1vbi9jaGFuZ2UucHJvdG8itQEKAWESQwoGY2hhbmdlGAEgASgLMisuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuY2hhbmdlUgZjaGFuZ2USEgoEbmFtZRgEIAEoCVIEbmFtZRIdCgNhZ2UYBSABKAsyCy5JbnQzMlZhbHVlUgNhZ2USOAoDYWJ2GAYgASgLMiYuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuYlIDYWJ2IjYKAWISEgoEbmFtZRgEIAEoCVIEbmFtZRIdCgNhZ2UYBSABKAsyCy5JbnQzMlZhbHVlUgNhZ2Ui5QcKAXQSQwoGY2hhbmdlGAEgASgLMisuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuY2hhbmdlUgZjaGFuZ2USDgoCaXQYAyABKAVSAml0EhwKAnN2GAQgASgLMgwuU3RyaW5nVmFsdWVSAnN2Eg4KAnJzGAUgAygJUgJycxJBCgNtaXMYBiADKAsyLy5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy50Lk1pc0VudHJ5UgNtaXMSQQoDbWxzGAcgAygLMi8uY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMudC5NbHNFbnRyeVIDbWxzEkEKA21zcxgIIAMoCzIvLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLnQuTXNzRW50cnlSA21zcxJBCgNtc2EYCSADKAsyLy5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy50Lk1zYUVudHJ5UgNtc2ESQQoDbXNiGAogAygLMi8uY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMudC5Nc2JFbnRyeVIDbXNiEjYKAnJhGAsgAygLMiYuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuYVICcmESNgoCYXYYDCABKAsyJi5jb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwYy5hUgJhdhI2CgJidhgNIAEoCzImLmNvbS52YXJpZmxpZ2h0LmFwcy5kYXRhc2VydmljZS5ncnBjLmJSAmJ2GjYKCE1pc0VudHJ5EhAKA2tleRgBIAEoBVIDa2V5EhQKBXZhbHVlGAIgASgJUgV2YWx1ZToCOAEaNgoITWxzRW50cnkSEAoDa2V5GAEgASgDUgNrZXkSFAoFdmFsdWUYAiABKAlSBXZhbHVlOgI4ARo2CghNc3NFbnRyeRIQCgNrZXkYASABKAlSA2tleRIUCgV2YWx1ZRgCIAEoCVIFdmFsdWU6AjgBGl4KCE1zYUVudHJ5EhAKA2tleRgBIAEoCVIDa2V5EjwKBXZhbHVlGAIgASgLMiYuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuYVIFdmFsdWU6AjgBGl4KCE1zYkVudHJ5EhAKA2tleRgBIAEoCVIDa2V5EjwKBXZhbHVlGAIgASgLMiYuY29tLnZhcmlmbGlnaHQuYXBzLmRhdGFzZXJ2aWNlLmdycGMuYlIFdmFsdWU6AjgBQiaqAiNjb20udmFyaWZsaWdodC5hcHMuZGF0YXNlcnZpY2UuZ3JwY2IGcHJvdG8zCr8BChFwcm94eS9wcm94eS5wcm90byI/CgdCYWNrZW5kEhIKBG5hbWUYASABKAlSBG5hbWUSIAoLZGVzY3JpcHRpb24YAiABKAxSC2Rlc2NyaXB0aW9uIioKDlJlZ2lzdGVyUmVzdWx0EhgKB3N1Y2Nlc3MYASABKAhSB3N1Y2Nlc3MyNQoMUHJveHlTZXJ2aWNlEiUKCHJlZ2lzdGVyEgguQmFja2VuZBoPLlJlZ2lzdGVyUmVzdWx0YgZwcm90bzM="
	msgs := map[string]*desc.MessageDescriptor{}
	fs := new(descriptor.FileDescriptorSet)
	descBytes, _ := base64.StdEncoding.DecodeString(str)
	ee := fs.XXX_Unmarshal(descBytes)
	if ee != nil {
		fmt.Errorf("can't parse desc")
	}
	files, _ := desc.CreateFileDescriptorsFromSet(fs)
	for _, file := range files {
		for _, msgType := range file.GetMessageTypes() {
			msgs[msgType.GetFullyQualifiedName()] = msgType
		}
	}
	msgDesc := msgs["com.variflight.aps.dataservice.grpc.test"]
	msg1 := dynamicProto.NewMessage(msgDesc)
	child1 := dynamicProto.NewMessage(msgDesc)
	//child1.SetField(msgDesc.FindFieldByNumber(1), "a")
	msg1.PutMapField(msgDesc.FindFieldByNumber(5), "key", child1)
	v1 := time.Now().Unix()
	CacheManager.SetVersionCache("a", v1, msg1, msgDesc, 3000)
	time.Sleep(time.Second)

	msg2 := dynamicProto.NewMessage(msgDesc)
	child2 := dynamicProto.NewMessage(msgDesc)
	child2.SetField(msgDesc.FindFieldByNumber(1), "b")
	msg2.PutMapField(msgDesc.FindFieldByNumber(5), "key", child2)
	CacheManager.SetVersionCache("a", time.Now().Unix(), msg2, msgDesc, 3000)
	time.Sleep(time.Second)

	CacheManager.SetVersionCache("a", time.Now().Unix(), nil, msgDesc, 3000)
	msg, change, _, hit := CacheManager.GetVersionCache("a", v1)
	time.Sleep(1000)
	CacheManager.SetVersionCache("a", time.Now().Unix(), msg2, msgDesc, 3000)
	msg, change, _, hit = CacheManager.GetVersionCache("a", v1)
	//bts, _ := proto.Marshal(change)

	fmt.Println(hit, msg, change)
}
